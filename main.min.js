/*! delayed-scroll-restoration-polyfill@0.1.1 | https://github.com/brigade/delayed-scroll-restoration-polyfill */
"use strict";
if (window.history.pushState) {
    var getScrollbarWidth = function() {
            var e = document.createElement("div");
            e.style.visibility = "hidden", e.style.width = "100px", e.style.msOverflowStyle = "scrollbar", document.body.appendChild(e);
            var t = e.offsetWidth;
            e.style.overflow = "scroll";
            var o = document.createElement("div");
            o.style.width = "100%", e.appendChild(o);
            var n = o.offsetWidth;
            return e.parentNode.removeChild(e), t - n
        },
        SCROLL_RESTORATION_TIMEOUT_MS = 3e3,
        TRY_TO_SCROLL_INTERVAL_MS = 50,
        originalPushState = window.history.pushState,
        originalReplaceState = window.history.replaceState;
    window.history.pushState = function() {
        var e = Object.assign({}, window.history.state, {
            __scrollX: window.scrollX,
            __scrollY: window.scrollY
        });
        originalReplaceState.call(window.history, e, ""), originalPushState.apply(window.history, arguments)
    }, window.history.replaceState = function(e) {
        for (var t = Object.assign({}, {
                __scrollX: window.history.state && window.history.state.__scrollX,
                __scrollY: window.history.state && window.history.state.__scrollY
            }, e), o = arguments.length, n = Array(o > 1 ? o - 1 : 0), r = 1; r < o; r++)
            n[r - 1] = arguments[r];
        originalReplaceState.apply(window.history, [t].concat(n))
    };
    var timeoutHandle = null,
        scrollBarWidth = null,
        tryToScrollTo = function e(t) {
            clearTimeout(timeoutHandle);
            var o = document.body,
                n = document.documentElement;
            scrollBarWidth || (scrollBarWidth = getScrollbarWidth());
            var r = Math.max(o.scrollWidth, o.offsetWidth, n.clientWidth, n.scrollWidth, n.offsetWidth),
                i = Math.max(o.scrollHeight, o.offsetHeight, n.clientHeight, n.scrollHeight, n.offsetHeight);
            r + scrollBarWidth - window.innerWidth >= t.x && i + scrollBarWidth - window.innerHeight >= t.y || Date.now() > t.latestTimeToTry ? window.scrollTo(t.x, t.y) : timeoutHandle = setTimeout(function() {
                return e(t)
            }, TRY_TO_SCROLL_INTERVAL_MS)
        },
        onPopState = function() {
            var e = window.history.state;
            e && Number.isFinite(e.__scrollX) && Number.isFinite(e.__scrollY) && setTimeout(function() {
                return tryToScrollTo({
                    x: e.__scrollX,
                    y: e.__scrollY,
                    latestTimeToTry: Date.now() + SCROLL_RESTORATION_TIMEOUT_MS
                })
            })
        };
    window.addEventListener("popstate", onPopState, !0)
}
!function() {
    for (var e = 0, t = ["ms", "moz", "webkit", "o"], o = 0; o < t.length && !window.requestAnimationFrame; ++o)
        window.requestAnimationFrame = window[t[o] + "RequestAnimationFrame"], window.cancelAnimationFrame = window[t[o] + "CancelAnimationFrame"] || window[t[o] + "CancelRequestAnimationFrame"];
    window.requestAnimationFrame || (window.requestAnimationFrame = function(t, o) {
        var n = (new Date).getTime(),
            r = Math.max(0, 16 - (n - e)),
            i = window.setTimeout(function() {
                t(n + r)
            }, r);
        return e = n + r, i
    }), window.cancelAnimationFrame || (window.cancelAnimationFrame = function(e) {
        clearTimeout(e)
    })
}(), function(e, t) {
    "function" == typeof define && define.amd ? define([], t(e)) : "object" == typeof exports ? module.exports = t(e) : e.modals = t(e)
}("undefined" != typeof global ? global : this.window || this.global, function(e) {
    var t,
        o,
        n,
        r = {},
        i = "querySelector" in document && "addEventListener" in e && "classList" in document.createElement("_"),
        a = "closed",
        l = {
            selectorToggle: "[data-modal]",
            selectorWindow: "[data-modal-window]",
            selectorClose: "[data-modal-close]",
            modalActiveClass: "active",
            modalBGClass: "modal-bg",
            preventBGScroll: !0,
            preventBGScrollHtml: !0,
            preventBGScrollBody: !0,
            backspaceClose: !0,
            stopVideo: !0,
            callbackOpen: function() {},
            callbackClose: function() {}
        },
        c = function() {
            var e = {},
                t = !1,
                o = 0,
                n = arguments.length;
            "[object Boolean]" === Object.prototype.toString.call(arguments[0]) && (t = arguments[0], o++);
            for (var r = function(o) {
                for (var n in o)
                    Object.prototype.hasOwnProperty.call(o, n) && (t && "[object Object]" === Object.prototype.toString.call(o[n]) ? e[n] = c(!0, e[n], o[n]) : e[n] = o[n])
            }; o < n; o++) {
                var i = arguments[o];
                r(i)
            }
            return e
        },
        s = function(e, t) {
            for (var o = t.charAt(0); e && e !== document; e = e.parentNode) {
                if ("." === o && e.classList.contains(t.substr(1)))
                    return e;
                if ("#" === o && e.id === t.substr(1))
                    return e;
                if ("[" === o && e.hasAttribute(t.substr(1, t.length - 2)))
                    return e;
                if (e.tagName.toLowerCase() === t)
                    return e
            }
            return !1
        },
        d = function(e, t) {
            if (t.stopVideo && e.classList.contains(t.modalActiveClass)) {
                var o = e.querySelector("iframe"),
                    n = e.querySelector("video");
                if (o) {
                    var r = o.src;
                    o.src = r
                }
                n && n.pause()
            }
        },
        u = function() {
            var e = document.createElement("div");
            e.style.visibility = "hidden", e.style.width = "100px", e.style.msOverflowStyle = "scrollbar", document.body.appendChild(e);
            var t = e.offsetWidth;
            e.style.overflow = "scroll";
            var o = document.createElement("div");
            o.style.width = "100%", e.appendChild(o);
            var n = o.offsetWidth;
            return e.parentNode.removeChild(e), t - n
        },
        f = function() {
            if (!document.querySelector("[data-modal-bg]")) {
                var e = document.createElement("div");
                e.setAttribute("data-modal-bg", !0), e.classList.add(n.modalBGClass), document.body.appendChild(e)
            }
        },
        m = function() {
            var e = document.querySelector("[data-modal-bg]");
            e && document.body.removeChild(e)
        };
    r.closeModal = function(e) {
        var t = c(n || l, e || {}),
            r = document.querySelector(t.selectorWindow + "." + t.modalActiveClass);
        r && (d(r, t), r.classList.remove(t.modalActiveClass), m(), a = "closed", t.preventBGScroll && (document.documentElement.style.overflowY = "", document.body.style.overflowY = "", document.body.style.paddingRight = ""), t.callbackClose(o, r), o && (o.focus(), o = null))
    }, r.openModal = function(e, i, s) {
        var d = c(n || l, s || {}),
            u = document.querySelector(i);
        "open" === a && r.closeModal(d), e && (o = e), u.classList.add(d.modalActiveClass), f(), a = "open", u.setAttribute("tabindex", "-1"), u.focus(), d.preventBGScroll && (d.preventBGScrollHtml && (document.documentElement.style.overflowY = "hidden"), d.preventBGScrollBody && (document.body.style.overflowY = "hidden"), document.body.style.paddingRight = t + "px"), d.callbackOpen(e, u)
    };
    var p = function(e, t, o) {
            if (o)
                return e.removeEventListener("touchstart", c, !1), e.removeEventListener("touchend", s, !1), void e.removeEventListener("click", d, !1);
            if (t && "function" == typeof t) {
                var n,
                    r,
                    i,
                    a,
                    l,
                    c = function(e) {
                        n = !0, r = e.changedTouches[0].pageX, i = e.changedTouches[0].pageY
                    },
                    s = function(e) {
                        a = e.changedTouches[0].pageX - r, l = e.changedTouches[0].pageY - i, Math.abs(a) >= 7 || Math.abs(l) >= 10 || t(e)
                    },
                    d = function(e) {
                        return n ? void (n = !1) : void t(e)
                    };
                e.addEventListener("touchstart", c, !1), e.addEventListener("touchend", s, !1), e.addEventListener("click", d, !1)
            }
        },
        w = function(e) {
            var t = e.target,
                o = s(t, n.selectorToggle),
                i = s(t, n.selectorClose),
                l = s(t, n.selectorWindow),
                c = e.keyCode;
            if (c && "open" === a)
                (27 === c || n.backspaceClose && (8 === c || 46 === c)) && r.closeModal();
            else if (t) {
                if (l && !i)
                    return;
                !o || c && 13 !== c ? "open" === a && (e.preventDefault(), r.closeModal()) : (e.preventDefault(), r.openModal(o, o.getAttribute("data-modal"), n))
            }
        };
    return r.destroy = function() {
        n && (p(document, null, !0), document.removeEventListener("keydown", w, !1), document.documentElement.style.overflowY = "", document.body.style.overflowY = "", document.body.style.paddingRight = "", t = null, o = null, n = null)
    }, r.init = function(e) {
        i && (r.destroy(), n = c(l, e || {}), t = u(), p(document, w), document.addEventListener("keydown", w, !1))
    }, r
}), function(e, t) {
    "function" == typeof define && define.amd ? define([], t) : "object" == typeof module && module.exports ? module.exports = t() : e.Rellax = t()
}(this, function() {
    var e = function(t, o) {
        var n = Object.create(e.prototype),
            r = 0,
            i = 0,
            a = 0,
            l = 0,
            c = [],
            s = !1,
            d = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame || window.oRequestAnimationFrame || function(e) {
                setTimeout(e, 1e3 / 60)
            },
            u = window.transformProp || function() {
                var e = document.createElement("div");
                if (null == e.style.transform) {
                    var t = ["Webkit", "Moz", "ms"];
                    for (var o in t)
                        if (void 0 !== e.style[t[o] + "Transform"])
                            return t[o] + "Transform"
                }
                return "transform"
            }(),
            f = function(e, t, o) {
                return e <= t ? t : e >= o ? o : e
            };
        n.options = {
            speed: -2,
            center: !1,
            round: !0,
            vertical: !0,
            horizontal: !1,
            callback: function() {}
        }, o && Object.keys(o).forEach(function(e) {
            n.options[e] = o[e]
        }), n.options.speed = f(n.options.speed, -10, 10), t || (t = ".rellax");
        var m = document.querySelectorAll(t);
        if (!(m.length > 0))
            throw new Error("The elements you're trying to select don't exist.");
        n.elems = m;
        var p = function() {
                i = window.innerHeight, l = window.innerWidth, v();
                for (var e = 0; e < n.elems.length; e++) {
                    var t = w(n.elems[e]);
                    c.push(t)
                }
                window.addEventListener("resize", function() {
                    g()
                }), y(), g()
            },
            w = function(e) {
                var t = e.getAttribute("data-rellax-percentage"),
                    o = e.getAttribute("data-rellax-speed"),
                    r = e.getAttribute("data-rellax-zindex") || 0,
                    a = n.options.vertical && (t || n.options.center) ? window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop : 0,
                    c = n.options.horizontal && (t || n.options.center) ? window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft : 0,
                    s = a + e.getBoundingClientRect().top,
                    d = e.clientHeight || e.offsetHeight || e.scrollHeight,
                    u = c + e.getBoundingClientRect().left,
                    m = e.clientWidth || e.offsetWidth || e.scrollWidth,
                    p = t ? t : (a - s + i) / (d + i),
                    w = t ? t : (c - u + l) / (m + l);
                n.options.center && (w = .5, p = .5);
                var v = o ? f(o, -10, 10) : n.options.speed;
                (t || n.options.center) && (v = f(o || n.options.speed, -5, 5));
                var y = h(w, p, v),
                    g = e.style.cssText,
                    b = "";
                if (g.indexOf("transform") >= 0) {
                    var S = g.indexOf("transform"),
                        T = g.slice(S),
                        L = T.indexOf(";");
                    b = L ? " " + T.slice(11, L).replace(/\s/g, "") : " " + T.slice(11).replace(/\s/g, "")
                }
                return {
                    baseX: y.x,
                    baseY: y.y,
                    top: s,
                    left: u,
                    height: d,
                    width: m,
                    speed: v,
                    style: g,
                    transform: b,
                    zindex: r
                }
            },
            v = function() {
                var e = r,
                    t = a;
                return r = void 0 !== window.pageYOffset ? window.pageYOffset : (document.documentElement || document.body.parentNode || document.body).scrollTop, a = void 0 !== window.pageXOffset ? window.pageXOffset : (document.documentElement || document.body.parentNode || document.body).scrollLeft, !(e == r || !n.options.vertical) || !(t == a || !n.options.horizontal)
            },
            h = function(e, t, o) {
                var r = {},
                    i = o * (100 * (1 - e)),
                    a = o * (100 * (1 - t));
                return r.x = n.options.round ? Math.round(i) : Math.round(100 * i) / 100, r.y = n.options.round ? Math.round(a) : Math.round(100 * a) / 100, r
            },
            y = function() {
                v() && s === !1 && g(), d(y)
            },
            g = function() {
                for (var e = 0; e < n.elems.length; e++) {
                    var t = (r - c[e].top + i) / (c[e].height + i),
                        o = (a - c[e].left + l) / (c[e].width + l),
                        s = h(o, t, c[e].speed),
                        d = s.y - c[e].baseY,
                        f = s.x - c[e].baseX,
                        m = c[e].zindex,
                        p = "translate3d(" + (n.options.horizontal ? f : "0") + "px," + (n.options.vertical ? d : "0") + "px," + m + "px) " + c[e].transform;
                    n.elems[e].style[u] = p
                }
                n.options.callback(s)
            };
        return n.destroy = function() {
            for (var e = 0; e < n.elems.length; e++)
                n.elems[e].style.cssText = c[e].style;
            s = !0
        }, p(), n
    };
    return e
}), function() {
    var e,
        t = document.body,
        o = document.querySelector("[data-header]"),
        n = (document.querySelectorAll("[data-poster]"), document.querySelector("[data-scroll-indicator]")),
        r = Power4.easeInOut,
        i = ".6",
        a = o.offsetHeight,
        l = "is-active",
        c = "is-inactive",
        s = "is-scrolled",
        d = !1,
        u = !1;
    "scrollRestoration" in history && (history.scrollRestoration = "manual");
    var f = Boolean("localhost" === window.location.hostname || "[::1]" === window.location.hostname || window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));
    "serviceWorker" in navigator && ("https:" === window.location.protocol || f) && navigator.serviceWorker.register("service-worker.js").then(function(e) {
        e.onupdatefound = function() {
            if (navigator.serviceWorker.controller) {
                var t = e.installing;
                t.onstatechange = function() {
                    switch (t.state) {
                    case "installed":
                        break;
                    case "redundant":
                        throw new Error("The installing service worker became redundant.")
                    }
                }
            }
        }
    })["catch"](function(e) {
        console.error("Error during service worker registration:", e)
    });
    var m = function(e) {
            return ("string" == typeof e || e instanceof String) && (e = e.replace(/^['"]+|\s+|\\|(;\s?})+|['"]$/g, "")), e
        },
        p = function() {
            var e = window.getComputedStyle(t, ":after").getPropertyValue("content");
            return m(e)
        },
        w = function(e, t) {
            for (var o = t.charAt(0); e && e !== document; e = e.parentNode) {
                if ("." === o && e.classList.contains(t.substr(1)))
                    return e;
                if ("#" === o && e.id === t.substr(1))
                    return e;
                if ("[" === o && e.hasAttribute(t.substr(1, t.length - 2)))
                    return e;
                if (e.tagName.toLowerCase() === t)
                    return e
            }
            return !1
        },
        v = function(e, t, o) {
            var n;
            return function() {
                var r = this,
                    i = arguments,
                    a = function() {
                        n = null, o || e.apply(r, i)
                    },
                    l = o && !n;
                clearTimeout(n), n = setTimeout(a, t), l && e.apply(r, i)
            }
        },
        h = function() {
            var e = new XMLHttpRequest;
            e.open("GET", "/sprite.svg", !0), e.send(), e.onload = function() {
                var t = document.createElement("div");
                t.style.display = "none", t.innerHTML = e.responseText, document.body.insertBefore(t, document.body.childNodes[0])
            }
        },
        y = function(e, t, o) {
            if (window.XMLHttpRequest) {
                var n = new XMLHttpRequest;
                n.onreadystatechange = function() {
                    if (4 === n.readyState) {
                        if (200 !== n.status)
                            return void (o && "function" == typeof o && o(n.responseText, n));
                        t && "function" == typeof t && t(n.responseText, n)
                    }
                }, n.open("GET", e), n.send()
            }
        },
        g = function(e) {
            y(e, function(t) {
                var o = document.createElement("div");
                o.innerHTML = t;
                var n = document.querySelector("[data-transition-content]"),
                    r = o.querySelector("[data-transition-content]");
                document.querySelector("main").appendChild(r);
                var i = o.querySelector("title").textContent;
                document.title = i, L(i, e), TweenMax.killAll(), b(n), S(r), x(o)
            })
        },
        b = function(e) {
            TweenMax.to(e, i, {
                ease: r,
                x: "-2%",
                opacity: "0",
                onStart: function() {
                    modals.closeModal()
                },
                onComplete: function() {
                    e.parentNode.removeChild(e)
                }
            })
        },
        S = function(e) {
            TweenMax.from(e, i, {
                delay: i,
                ease: r,
                x: "2%",
                opacity: "0",
                onStart: function() {
                    document.querySelector("[data-graphic]") && (T(), window.scrollTo(0, 0)), R()
                },
                onComplete: function() {
                    d = !1, u = !1
                }
            })
        },
        T = function() {
            var e = document.querySelector("[data-graphic]"),
                t = e.querySelector("svg"),
                o = t.querySelectorAll("circle, rect, path");
            TweenMax.staggerFrom(o, 2 * i, {
                ease: r,
                opacity: "0",
                scale: "0.8",
                transformOrigin: "center center"
            }, .05)
        },
        L = function(e, t) {
            u ? history.replaceState(null, e, t) : history.pushState(null, e, t)
        },
        x = function(e) {
            if (e.querySelector("[data-content-nav]")) {
                var t = e.querySelector("[data-content-nav]");
                if (o.querySelector("[data-content-nav]"))
                    o.querySelector("[data-content-nav]").innerHTML = t.innerHTML;
                else {
                    var n = document.createElement("nav");
                    n.className = "content-nav", n.setAttribute("data-content-nav", ""), n.innerHTML = t.innerHTML, o.appendChild(n)
                }
            } else {
                var r = o.querySelector("[data-content-nav]");
                r && r.parentNode.removeChild(r)
            }
        },
        E = function(e) {
            var t = e.href.split("#")[1];
            TweenMax.to(window, i, {
                scrollTo: {
                    y: "#" + t,
                    offsetY: a,
                    ease: r
                }
            })
        },
        A = function() {
            var e = window.innerHeight;
            TweenMax.to(window, i, {
                scrollTo: {
                    y: e,
                    offsetY: a,
                    ease: r
                }
            })
        },
        C = function(e) {
            e >= a ? (o.classList.add(s), n.classList.add(c)) : (o.classList.remove(s), n.classList.remove(c))
        },
        q = function(e) {
            var t = w(e.target, "a");
            if (!(t && 3 === e.which || 2 === e.which || e.metaKey || e.ctrlKey)) {
                if (t && t.hasAttribute("data-transition-page")) {
                    if (e.preventDefault(), d)
                        return;
                    var o = t.href;
                    d = !0, g(o)
                }
                t && t.hasAttribute("data-scroll") && (e.preventDefault(), E(t)), t && t.hasAttribute("data-scroll-indicator") && (e.preventDefault(), A())
            }
        },
        M = v(function(e) {
            p()
        }, 250),
        O = function(e) {
            if (!d) {
                var t = location.href;
                d = !0, u = !0, g(t)
            }
        },
        _ = function(t) {
            e = window.scrollY, C(e), requestAnimationFrame(_)
        },
        R = function() {
            if ("medium" === p()) {
                new Rellax(".rellax", {
                    round: !0,
                    vertical: !0,
                    horizontal: !1
                })
            }
        };
    history.replaceState(null, document.title, location.href), document.documentElement.className = document.documentElement.className.replace("no-js", "js"), h(), document.querySelector("[data-graphic]") && T(), window.addEventListener("click", q, !1), window.addEventListener("resize", M, !1), window.addEventListener("popstate", O, !1), window.addEventListener("DOMContentLoaded", _, !1), modals.init({
        modalActiveClass: l,
        callbackOpen: function(e, t) {
            t.scrollTo(0, 0)
        }
    }), R()
}();
//# sourceMappingURL=main.min.js.map